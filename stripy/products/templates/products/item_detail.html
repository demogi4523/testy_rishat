<html>
  <head>
    <title>Cool stuff | {{ item.name }}</title>
    <script src="https://js.stripe.com/v3/"></script>
  </head>
  <body>
    <script>
        var stripe;
        fetch('/get_pk')
          .then((response) => response.json())
          .then((data) => {
            stripe = Stripe(data.pk);
            console.log("Success getting Stripe Public Key");
          })
          .catch((err) => {
          console.error(err);
          console.error("Stripe Public Key getting error");
          });
    </script>

    <div>
        <div>Name: {{ item.name }}</div>
        <div>Description: {{ item.description }}</div>
        <div>Price: {{ item.price }}</div>
    <div>
    
    <form action="/create_checkout_session/{{item.pk}}" method="GET">
      {% csrf_token %}
      <button type="submit">Checkout</button>
    </form>
  </body>
</html>



